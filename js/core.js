var thisPage=1;var count=0;var screenWidth=1600;var taskId=0;$(function(){init_event();Body.init();Desktop.init();Deskpanel.init(ops).refresh();Sidebar.init({location:"top",Icon:leftMenu});BottomBar.init();Filelist.init();Navbar.init();StartMenu.init()});init_event=function(){document.oncontextmenu=function(){return false};var isIE=navigator.appName;if(isIE=="Microsoft Internet Explorer"){$("body").bind("mousedown",function(event){if(event.which==3){var md=Desktop.MenuData();$("body").smartMenu(md,{name:"image"})}})}$(document).bind("mousemove",function(e){var area=$(window).width()-50;if(e.pageX>area){e.pageX=area}})};Util={formatmodel:function(str,model){for(var k in model){var re=new RegExp("{"+k+"}","g");str=str.replace(re,model[k])}return str}};Panel=function(){return me={hitTest:function(panel,x,y){var pl,pt;return !(x<(pl=panel.offset().left)||y<(pt=panel.offset().top)||x>pl+panel.width()||y>pt+panel.height())},getIdx:function(panel){var ci=0;while(panel=panel.prev()){ci++}return ci},unSelecte:function(){return window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){document.selection.empty()}}()}}();Body=function(me){return me={init:function(){me.create();me.bindEvent()},create:function(){me.box=$("body");me.setStyle()},bindEvent:function(){function move(evt){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}function up(evt){$(document).unbind("mousemove",move).unbind("mouseup",up)}$(document).bind("mousedown",function(){$(document).bind("mousemove",move).bind("mouseup",up)})},addPanel:function(panel){me.box.append(panel)},setStyle:function(){me.box.css({backgroud:"none repeat scroll 0 0 transparent",display:"block",height:"500px"})}}}();Desktop=function(me){return me={init:function(){me.create();me.setMenu();return me},create:function(){me.box=$("<div id='desktop' style='position: static;'></div>");Body.addPanel(me.box)},addPanel:function(panel){me.box.append(panel)},show:function(){me.box.show()},hide:function(){me.box.hide()},MenuData:function(){var MenuData=[[{text:"新建",img:"menu/document-new.png",data:[[{text:"文件夹...",img:"menu/folder.png",func:function(){}}],[{text:"文本文件...",img:"menu/text.png",func:function(){}},{text:"HTML文件...",img:"menu/html.png",func:function(){}},{text:"WPS文字...",img:"menu/wps_w.png",func:function(){}},{text:"WPS演示...",img:"menu/wps_p.png",func:function(){}},{text:"WPS表格...",img:"menu/wps_s.png",func:function(){}}],[{text:"链接到地址(URL)...",img:"menu/html.png",func:function(){}},{text:"到文件或目录...",img:"menu/lock.png",func:function(){}},{text:"链接到应用程序...",img:"menu/sys.png",func:function(){}},{text:"链接到设备...",img:"menu/device.png",func:function(){}},]]}],[{text:"图标设置",img:"menu/icons.png",data:[[{text:"大图标",img:"menu/icon.png",func:function(){Deskpanel.desktopsContainer.removeClass("desktopSmallIcon")}},{text:"小图标",img:"menu/icon.png",func:function(){}}]]},{text:"刷新电脑(R)",img:"menu/refresh.png",func:function(){}},{text:"用 我的电脑 打开（W）...",img:"menu/computer.png",func:function(){}}],[{text:"运行命令...",img:"menu/sys.png",func:function(){}},{text:"活动...",img:"menu/action.png",func:function(){}},{text:"解锁部件",img:"menu/lock.png",func:function(){}}],[{text:"锁定屏幕",img:"menu/lock_screen.png",func:function(){}},{text:"离开...",img:"menu/leave.png",func:function(){}}],[{text:"文件夹视图设置",img:"menu/sys.png",func:function(){Windows.openSys({id:"themSetting",title:"设置主题",icon:"setting.png",width:650,height:500,content:document.getElementById("themeSetting_wrap")})}}],];return MenuData},setMenu:function(){var MenuData=me.MenuData();me.box.smartMenu(MenuData,{name:"image"})}}}();Deskpanel=function(me){var desktopWrapper="<div id='desktopWrapper'></div>";var desktopsContainer="<div id='desktopsContainer' class='desktopsContainer'	>";var desktopContainer="<div class='desktopContainer' index='{index}' >"+"<div id='zoomWallpaperGrid"+"{index}"+"' class='zoomWallpaperGrid' style='position: absolute; z-index: -10 !important; left: 0pt; top: 0pt; overflow: hidden; height: 469px; width: 1392px;'><img id='zoomWallpaper' class='zoomWallpaper' src='images/background"+"{index}"+".jpg' style='position: absolute; top: 0pt; left: 0pt;  height: 469px; width: 1392px;'/></div>";var bolodNews="<div class='bolod_news_outline' style='width:232px;height:552px;float:left;right:0px;top:0px;'> <div id='bolod_news'>"+" <div id='bolod_news_title'> <img src='image/bolod_news_icon.png' /></div> "+"<div id='bolod_news_list'>"+"<ul><li class='bolod_news_item'><a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/><font class='bolod_title' >宝龙科技</font> <br /> <font class='bolod_news_content'>《宝龙———2013年精彩回顾》</font></a></li>"+"<li class='bolod_news_item'> <a href='#' title='' target=''>  <img class='' src='image/sina.png' title='宝龙'/><font class='bolod_title' >新闻要闻——新浪新闻</font> <br /> <font class='bolod_news_content'>[财经]法国学者跨国搬家投诉快递</font>  </a> </li>"+"<li class='bolod_news_item'><a href='#' title='' target=''>  <img class='' src='image/sina.png' title='宝龙'/> <font class='bolod_title' >国际要闻——新浪新闻</font> <br /><font class='bolod_news_content'>乌克兰新议长图尔奇诺夫</font></a> </li>"+" <li class='bolod_news_item'><a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/><font class='bolod_title' >国际要闻——新浪新闻</font> <br /> <font class='bolod_news_content'>白宫呼吁乌克兰停止暴力</font></a> </li>"+" <li class='bolod_news_item'> <a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/><font class='bolod_title' >体育要闻——新浪娱乐</font> <br /><font class='bolod_news_content'>击剑大赛马剑飞西班牙摘金</font></a> </li>"+" <li class='bolod_news_item'> <a href='#' title='' target=''>  <img class='' src='image/sina.png' title='宝龙'/> <font class='bolod_title' >科技要闻——新浪新闻</font> <br /> <font class='bolod_news_content'>三星第二代智能手表Gear 2</font> </a> </li>"+" <li class='bolod_news_item'><a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/>  <font class='bolod_title' >财经要闻——新浪财经</font> <br /> <font class='bolod_news_content'>资本巨头谈马锡扩大中国业务</font> </a></li>"+" <li class='bolod_news_item'><a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/> <font class='bolod_title' >教育要闻——新浪教育</font> <br /><font class='bolod_news_content'>美国女孩摆摊卖煎饼</font></a></li>"+"<li class='bolod_news_item'><a href='#' title='' target=''> <img class='' src='image/sina.png' title='宝龙'/><font class='bolod_title' >焦点新闻——新浪汽车</font> <br />  <font class='bolod_news_content'>省经信委副主任来宝龙国际调研</font> </a></li> "+"</ul>  </div>   </div> </div>";
var work=desktopContainer;var internet=desktopContainer+bolodNews;var enjoy=desktopContainer;var games=desktopContainer;var desktopAppListener="<div class='appListContainer icon_container_internet' customacceptdrop='{index}' index='{index}' _olddisplay='block' >";var internetApp="<div class='bolod_news_outline' style='height:329px;width:562px;left:0px;position:absolute;'></div>";var destopAppListenerArray=new Array(10);var heightArray=new Array(10);var widthArray=new Array(10);destopAppListenerArray[0]="<div class='appListContainer' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='top:5px;'>";destopAppListenerArray[1]=internetApp+desktopAppListener;var enjoryApp1="<div class='bolod_news_outline' style='height:543px;width:142px;left:0px;position:absolute;'><div class='desk3_containerName' >中华龙族</div>"+"<div class='appListContainer icon_container_internet' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='padding-right:8px;margin-top:0px;'>";destopAppListenerArray[2]=enjoryApp1;destopAppListenerArray[3]="<div class='bolod_news_outline' style='height:543px;width:140px;left:143px;position:absolute;top:0px;'><div class='desk3_containerName' >XOS-公共区</div>"+"<div class='appListContainer icon_container_internet' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='padding-right:6px;margin-top:0px;'>";var desktopAppListenerTemp="<div class='appListContainer icon_container_internet' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='margin-top:0px;' >";var enjoryApp3="<div class='bolod_news_outline' style='height:300px;width:562px;left:284px;position:absolute;top:0px;'><div class='desk3_containerName' >OS-私有区</div>";destopAppListenerArray[4]=enjoryApp3+desktopAppListenerTemp;var enjoryApp4="<div class='bolod_news_outline' style='height:242px;width:280px;left:284px;position:absolute;top:301px;'><div class='desk3_containerName' >本地保险箱</div>";destopAppListenerArray[5]=enjoryApp4+desktopAppListenerTemp;var enjoryApp5="<div class='bolod_news_outline' style='height:242px;width:280px;left:565px;position:absolute;top:301px;'><div class='desk3_containerName' >云端保险箱</div>";destopAppListenerArray[6]=enjoryApp5+desktopAppListenerTemp;destopAppListenerArray[7]="<div class='desk4_top_bg'></div>"+"<div class='desk4_center_con'><div id='desk4_back' onclick=deskBack()></div><input id='desk4_search' type='text' value='搜索..' name='search' /></div>"+"<div id='desk4_container' class='' style=''>"+"<div class='desk_appButton' onclick=showApp('desk4_multimedia') style=''>"+"<div id='multimedia' class='desk_icon_container'  ><img src='icon/multimedia.png' title='多媒体' /></div><div class='desk_icon_name'>多媒体</div></div>"+"<div class='desk_appButton' onclick=showApp('desk4_internet') style=''>"+"<div class='desk_icon_container' style=''><img src='icon/internet.png' title='网络' /></div><div class='desk_icon_name'>互联网</div></div>"+"<div class='desk_appButton' onclick=showApp('desk4_picture')  style=''>"+"<div class='desk_icon_container'><img src='icon/picture.png' title='图像' /></div><div class='desk_icon_name'>图像</div></div>"+"<div class='desk_appButton'  onclick=showApp('desk4_game')  style=''>"+"<div class='desk_icon_container'><img src='icon/game.png' title='游戏' /></div><div class='desk_icon_name'>游戏</div></div>"+"</div>"+"<div id='desk4_multimedia' class='desk4_appContainer' style='display:none;'><div style='margin:0 auto;text-align:center;width:1000px;'><div  class='appListContainer ' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='margin:auto !important;' >";destopAppListenerArray[8]="<div id='desk4_internet' class='desk4_appContainer' style='display:none;'><div style='margin:0 auto;text-align:center;width:1000px;'><div class='appListContainer ' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='margin-top:0px;' >";destopAppListenerArray[9]="<div id='desk4_picture' class='desk4_appContainer' style='display:none;'><div style='margin:0 auto;text-align:center;width:600px;'><div class='appListContainer ' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='margin-top:0px;' >";destopAppListenerArray[10]="<div id='desk4_game' class='desk4_appContainer' style='display:none;'><div style='margin:0 auto;text-align:center;width:820px;'><div class='appListContainer ' customacceptdrop='{index}' index='{index}' _olddisplay='block' style='margin-top:0px;height:300px;' >";var defaultIndex=0,defaultNum=DATA.menu.length,defautlSpace={top:0,right:0,bottom:50};return me={init:function(ops){me.create();me.addIcons(ops);me.space(defautlSpace);me.refresh();me.bindEvent();me.addCurrnet(defaultIndex);return me},create:function(){me.box=$(desktopWrapper);me.desktopsContainer=$(desktopsContainer);me.createDesktopsContainer(defaultNum);me.box.append(me.desktopsContainer);me.box.css({"left":"0px","right":"0px"});me.desktopsContainer.css("left",0);Desktop.addPanel(me.box);me.Icon=[]},bindEvent:function(){me.desktopsContainer.find(".appListContainer").each(function(){var desk=$(this);
var index=desk.attr("index");desk.sortable({items:".appButton",connectWith:".dock_middle",opacity:"0.6",start:function(event,ui){},stop:function(event,ui){var p=ui.item.parent();if(p.hasClass("dock_middle")){ui.item.removeAttr("style")}Deskpanel.switchCurrent(index);Deskpanel.refreshIcon()}}).disableSelection()});$(window).resize(me.refresh)},createDesktopsContainer:function(n){if(n&&n!=0){for(var i=1;i<=n;i++){me.desktopsContainer.append(me.addContainer(i))}}},addContainer:function(i){var c=me.createDesktopContainer(i);var a="";if(i==3){for(var m=3;m<8;m++){a=me.createDesktopAppListener(m);c.append(a)}}else{if(i==4){for(var l=8;l<12;l++){a=me.createDesktopAppListener(l);c.append(a)}}else{a=me.createDesktopAppListener(i);c.append(a)}}return c},createDesktopContainer:function(n){var temp="";if(n==1){temp=work}else{if(n==2){temp=internet}else{if(n==3){temp=enjoy}else{temp=games}}}return $(Util.formatmodel(temp,{"index":n-1}))},createDesktopAppListener:function(n){return $(Util.formatmodel(destopAppListenerArray[n-1],{"index":n-1}))},addIcons:function(ops){for(var i in ops){var key=i.replace("Icon","");me.addIcon(ops[i],key)}},addIcon:function(icon,idx){if(icon){if($.isArray(icon)){$.each(icon,function(){me.addIcon(this.valueOf(),idx)});return me}var Icon=typeof icon=="string"?appIcon_t1(icon):icon;me.Icon.push(Icon);me.box.find("div[customacceptdrop='"+parseInt(idx-1)+"']").append(Icon.box)}},addCurrnet:function(n){me.desktopsContainer.find(".desktopContainer[index='"+n+"']").addClass("desktop_current")},removeCurrent:function(n){me.desktopsContainer.find(".desktopContainer[index='"+n+"']").removeClass("desktop_current")},switchCurrent:function(n){var dc=me.desktopsContainer;dc.find(".desktopContainer[index='"+n+"']").addClass("desktop_current").siblings().removeClass("desktop_current")},space:function(ops){("top" in ops)&&(typeof ops.top=="string"?me.spaceTop+=ops.top:me.spaceTop=+ops.top||0);("left" in ops)&&(typeof ops.left=="string"?me.spaceLeft+=ops.top:me.spaceLeft=+ops.left||0);("right" in ops)&&(typeof ops.right=="string"?me.spaceRight+=ops.top:me.spaceRight=+ops.right||0);("bottom" in ops)&&(typeof ops.bottom=="string"?me.spaceBottom+=ops.top:me.spaceBottom=+ops.bottom||0);return me},refresh:function(){var ww=$(window).width(),screenWidth=ww;wh=$(window).height();me.width=ww-me.spaceRight-me.spaceLeft;me.height=wh-me.spaceTop-me.spaceBottom;var desktopContainer=me.desktopsContainer.find(".desktopContainer");var appContainer=desktopContainer.find(".appListContainer");heightArray[0]=me.height;widthArray[0]=me.width;heightArray[1]=273;widthArray[1]=504;heightArray[2]=465;widthArray[2]=54;heightArray[3]=465;widthArray[3]=54;heightArray[4]=222;widthArray[4]=504;heightArray[5]=164;widthArray[5]=222;heightArray[6]=164;widthArray[6]=222;heightArray[7]=300;widthArray[7]=me.width;$(desktopContainer).each(function(i){$(this).css({left:me.width,height:me.height+50,width:ww})});$(".desktop_current").css({left:0});var a="";$(".zoomWallpaperGrid,.zoomWallpaper").width(ww).height(wh);var r=me.row=~~(me.height/112);me.desktopsContainer.css({left:me.spaceLeft,top:me.spaceTop,width:me.width,height:me.height});appContainer.each(function(){$(this).css({"margin-left":5,display:"block"})});for(var j=0;j<appContainer.length;j++){$(appContainer[j]).css({height:heightArray[j],width:widthArray[j]})}me.refreshIcon()},refreshIcon:function(){var r=~~(me.height/92);var k=0;var appListeners=me.desktopsContainer.find(".appListContainer").each(function(){switch(k){case 0:r=~~(heightArray[k]/92);break;case 1:r=3;break;case 2:r=5;break;case 3:r=5;break;case 4:r=2;break;case 5:r=2;break;case 6:r=2;break;case 7:r=1;break;case 10:r=2;break;default:r=1}var icon=$(this).children();for(var j=0;j<icon.length;j++){var leftI=~~(j/r),topI=j%r;$(icon[j]).css({left:leftI*102+20,top:topI*92+20})}k++})},moveIconTo:function(icon,idx2){var ids=(Panel.getIdx(icon.box));if(idx>idx2){me.box.children(".appListContainer[index='1']").append(icon.box,idx2)}else{if(idx<idx2){me.box.children(".appListContainer[index='1']").append(icon.box,idx2+1)}}me.Icon.splice(idx,1);me.Icon.splice(idx2,0,icon);me.refresh()},removeIcon:function(icon){var idx=(Panel.getIdx(icon.box));me.Icon.splice(idx,1);icon.box.remove();me.refresh()},getIdx:function(ex,ey){ex-=me.spaceLeft+me.spaceRight;ey-=me.spaceTop+me.spaceBottom;return(~~(ex/142))*me.row+(~~(ey/112))}}}();StartMenu=function(me){var tab1_data=TAB_INFO.tab_1;var tab2_data=TAB_INFO.tab_2;var tab3_data=TAB_INFO.tab_3;var tab4_data=TAB_INFO.tab_4;var tab5_data=TAB_INFO.tab_5;var tab_ul_data=TAB_INFO.tab_ul;var side_tab1_data=TAB_INFO.tab_app1;var side_tab2_data=TAB_INFO.tab_app2;var side_tab3_data=TAB_INFO.tab_app3;var side_tab4_data=TAB_INFO.tab_app4;var side_tab5_data=TAB_INFO.tab_app5;var side_tab6_data=TAB_INFO.tab_app6;var side_tab7_data=TAB_INFO.tab_app7;var side_tab_arr=new Array();side_tab_arr.push(side_tab1_data,side_tab2_data,side_tab3_data,side_tab4_data,side_tab5_data,side_tab6_data,side_tab7_data);var _header="<div id='hender'> <div class='hender-title'>"+"<img src='icon/bolod-icon-32x32.png'>"+"<span>bolod&nbsp;(bolod)&nbsp;于&nbsp;bolod-XOS</span></div>"+"<div class='hender-search'>"+"<img src='icon/system-search.png'>"+"<span>搜索&nbsp;:</span><input type='text'></div></div>";
var _tabul_li="";for(var i=0;i<tab_ul_data.length;i++){if(i==0){_tabul_li+='<li onMouseOver="over(event);" class="tabs-selected">'+'<a href="#tabs-1" class="tabs-text-selected">'+'<img src="icon/'+tab_ul_data[i].icon+'" />'+"<span>"+tab_ul_data[i].name+"</span></a></li>"}else{_tabul_li+="<li id='tabs-button"+i+'\' onMouseOver="over(event);" class="tabs-noselected">'+'<a href="#tabs-'+(i+1)+'"><img src="icon/'+tab_ul_data[i].icon+'" />'+"<span>"+tab_ul_data[i].name+"</span></a></li>"}}var _tabul="<ul>"+_tabul_li+"</ul>";var _tab_spacer='<div class="tabs-spacer"></div>';var _tab1_li="";for(var i=0;i<tab1_data.length;i++){_tab1_li+="<li class='start-app' appid='"+tab1_data[i].appid+"' appname='"+tab1_data[i].name+"' "+"appicon='"+tab1_data[i].icon+"' appwidth='"+tab1_data[i].width+"'"+"appheight='"+tab1_data[i].height+"' apprul='"+tab1_data[i].url+"'>"+'<img src="icon/'+tab1_data[i].icon+'" />'+'<div><span class="icon-name">'+tab1_data[i].name+"</span></div></li>"}var _tab1='<div id="tabs-1" class="content-panel ui-corner-all">'+'<div class="text-content"><ul><div class="menu-title">主要应用程序</div>'+_tab1_li+"</ul></div></div>";var _tab2_li="";for(var i=0;i<tab2_data.length;i++){_tab2_li+='<li class="side_tab'+i+'"><img src="icon/'+tab2_data[i].icon+'" />'+'<div><span class="icon-name">'+tab2_data[i].name+"</span></div>"+'<img class="triangle-black" src="image/triangle-none.png" /></li>'}var _tab2='<div id="tabs-2" class="content-panel ui-corner-all">'+'<div class="text-content"><ul><div class="menu-title">全部应用程序</div>'+_tab2_li+"</ul></div></div>";var _tab3_li="";for(var i=0;i<tab3_data.length;i++){if(i==2||i==10){_tab3_li+='<img src="image/separators-line.png" class="separate-line" />'+'<div class="menu-title-separate">'+tab3_data[i].title+"</div>"}_tab3_li+="<li class='start-app' appid='"+tab3_data[i].appid+"' appname='"+tab3_data[i].name+"' "+"appicon='"+tab3_data[i].icon+"' appwidth='"+tab3_data[i].width+"'"+"appheight='"+tab3_data[i].height+"' apprul='"+tab3_data[i].url+"'>"+'<img src="icon/'+tab3_data[i].icon+'" />'+'<div><span class="icon-name">'+tab3_data[i].name+"</span>"+'<span class="icon-introduction">'+tab3_data[i].introduce+"</span></div></li>"}var _tab3='<div id="tabs-3" class="content-panel ui-corner-all">'+'<div class="text-content"><ul><div class="menu-title">应用程序</div>'+_tab3_li+"</ul></div></div>";var _tab4_li="";for(var i=0;i<tab4_data.length;i++){if(i==1){_tab4_li+='<img src="image/separators-line.png" class="separate-line" />'+'<div class="menu-title-separate">文档</div>'}_tab4_li+="<li class='start-app' appid='"+tab4_data[i].appid+"' appname='"+tab4_data[i].name+"' "+"appicon='"+tab4_data[i].icon+"' appwidth='"+tab4_data[i].width+"'"+"appheight='"+tab4_data[i].height+"' apprul='"+tab4_data[i].url+"'>"+'<img src="icon/'+tab4_data[i].icon+'" />'+'<div><span class="icon-name">'+tab4_data[i].name+"</span>"+'<span class="icon-introduction">'+tab4_data[i].introduce+"</span></div></li>"}var _tab4='<div id="tabs-4" class="content-panel ui-corner-all">'+'<div class="text-content"><ul><div class="menu-title">应用程序</div>'+_tab4_li+"</ul></div></div>";var _tab5_li="";for(var i=0;i<tab5_data.length;i++){if(i==3){_tab5_li+='<img src="image/separators-line.png" class="separate-line" />'+'<div class="menu-title-separate">文档</div>'}_tab5_li+="<li class='start-app' appid='"+tab5_data[i].appid+"' appname='"+tab5_data[i].name+"' "+"appicon='"+tab5_data[i].icon+"' appwidth='"+tab5_data[i].width+"'"+"appheight='"+tab5_data[i].height+"' apprul='"+tab5_data[i].url+"'>"+'<img src="icon/'+tab5_data[i].icon+'" />'+'<div><span class="icon-name">'+tab5_data[i].name+"</span>"+'<span class="icon-introduction">'+tab5_data[i].introduce+"</span></div></li>"}var _tab5='<div id="tabs-5" class="content-panel ui-corner-all">'+'<div class="text-content"><ul><div class="menu-title">应用程序</div>'+_tab5_li+"</ul></div></div>";var _tab_pages=_tab1+_tab2+_tab3+_tab4+_tab5;var _tabs='<div id="tabs" class="tabs-bottom">'+_header+_tabul+_tab_spacer+_tab_pages+"</div>";var _side_tab="";for(var i=0;i<side_tab_arr.length;i++){var _tab_li="";for(var j=0;j<side_tab_arr[i].length;j++){_tab_li+="<li class='start-app' appid='"+side_tab_arr[i][j].appid+"' appname='"+side_tab_arr[i][j].name+"' "+"appicon='"+side_tab_arr[i][j].icon+"' appwidth='"+side_tab_arr[i][j].width+"'"+"appheight='"+side_tab_arr[i][j].height+"' apprul='"+side_tab_arr[i][j].url+"'>"+'<img src="icon/'+side_tab_arr[i][j].icon+'" />'+'<div><span class="icon-name">'+side_tab_arr[i][j].name+"</span></div></li>"}var _side_tab_temp='<div id="side_tab'+i+'" class="content-panel ui-corner-all tabs-test">'+'<div class="text-content"><ul><div class="menu-title"><div class="sidetab-menu-title">'+'全部应用程序</div><div class="normal-menu-title">>&nbsp;&nbsp;&nbsp;'+side_tab_arr[i][0].title+"</div></div>"+_tab_li+"</ul></div></div>";_side_tab+=_side_tab_temp}var _start_menu='<div id="start-menu">'+_tabs+_side_tab+"</div>";return me={init:function(ops){me.create()},create:function(){me.start_menu=$(_start_menu);
Body.addPanel(me.start_menu);$(".start-app").click(function(){var _this=$(this);var id=_this.attr("appid");var name=_this.attr("appname");var title=_this.attr("appname");var url=_this.attr("apprul");var icon=_this.attr("appicon");var width=_this.attr("appwidth");var height=_this.attr("appheight");var sonMenu=_this.attr("sonMenu");if(sonMenu==undefined){sonMenu="[]"}var jsonSonMenu=eval("("+sonMenu+")");if(id=="0"){$(".download-window").show()}else{Windows.openApp(id,title,url,icon,jsonSonMenu,parseInt(width),parseInt(height))}});for(var i=0;i<7;i++){var temp=i+"";$(".side_tab"+i).click(function(){var className=$(this).attr("class");$("#"+className).animate({left:"1px"})})}$(".sidetab-menu-title").click(function(){var className=$(this).parent().parent().parent().parent().attr("id");$("#"+className).animate({left:"365px"})});$("#tabs").tabs({event:"mouseover"});$("#tabs").tabs();$("#tabs").tabs({active:1});$(".tabs-bottom .ui-tabs-nav, .tabs-bottom .ui-tabs-nav > *").removeClass("ui-corner-all ui-corner-top").addClass("ui-corner-bottom");$(".tabs-bottom .ui-tabs-nav").appendTo(".tabs-bottom")}}}();Sidebar=function(me){var tool_list="<div class='dock_tool_list' id='dockToolList' >";var tool_item="<div class='dock_tool_item'></div>";var tool_item_start="<div class='dock_tool_item' id='go-baby' style='width:50px'></div>";var tool_a="<a title='{title}' cmd='{cmd}'	class='dock_tool_icon dock_tool_{key}' href='javascript:void(0)'></a>";var SideBox=$.Class({init:function(ops){this.create("top")},create:function(location){this.box=$("<div id='"+location+"Bar'></div>");Desktop.addPanel(this.box)},addPanel:function(sidebar){this.box.append(sidebar.pbox)}});return me={init:function(ops){me.create("top");me.addToolList();me.addIcon(ops.Icon);me.initDrag()},create:function(location){me.leftPanel=SideBox({location:"left"});me.rightPanel=SideBox({location:"right"});me.topPanel=SideBox({location:"top"});me.bottomPanel=SideBox({location:"bottom"});me.box=$('<div class="dock_middle"></div>');me.pbox=$('<div id="dockContainer" class="dock_container " style="z-index: 10;"> </div>');me[location+"Panel"].addPanel(me.pbox);me.location=location;me.Icon=[];me.pbox.addClass("dock_pos_"+location);me.pbox.append(me.box);me.topPanel.box.append(me.pbox);Desktop.addPanel(me.topPanel.box);Desktop.addPanel(me.leftPanel.box);Desktop.addPanel(me.rightPanel.box);Desktop.addPanel(me.topPanel.box);me.createStartTool();me.createWPS_X();me.createWPS_W();me.createWPS_S();me.createWPS_P()},addToolList:function(){var docklist=$(tool_list);var dockItem=$(tool_item);var dockItem2=$(tool_item);var dockItem3=$(tool_item_start);dockItem.append(me.wps_x).append(me.wps_s);dockItem2.append(me.wps_w).append(me.wps_p);dockItem3.append(me.start);docklist.append(dockItem3).append(dockItem).append(dockItem2);me.box.append(docklist)},createStartTool:function(){me.start=$("<a title='点击这里开始' class='dock_tool_icon dock_tool_start'	href='#' ></a>");me.start.click(function(){var _this=$(this);var position="";var offsets={};var p=me.pbox.parent();var pid=p.attr("id");var key=pid.substring(0,pid.length-3);if(key=="left"){position="3-4";offsets={x:20,y:5}}else{if(key=="top"){position="3-2";offsets={x:10,y:20}}else{position="4-3";offsets={x:25,y:2}}}_this.powerFloat({width:185,eventType:"click",offsets:offsets,position:position,showCall:function(){}})})},createWPS_X:function(){me.wps_x=$(Util.formatmodel(tool_a,{"cmd":"wps-x","title":"X Mind","key":"wps-x"}))},createWPS_W:function(){me.wps_w=$(Util.formatmodel(tool_a,{"cmd":"wps-w","title":"WPS","key":"wps-w"}))},createWPS_S:function(){me.wps_s=$(Util.formatmodel(tool_a,{"cmd":"wps-s","title":"WPS","key":"wps-s"}))},createWPS_P:function(){me.wps_p=$(Util.formatmodel(tool_a,{"cmd":"wps-p","title":"WPS","key":"wps-p"}))},addIcon:function(icon,idx){if(icon){if($.isArray(icon)){$.each(icon,function(){me.addIcon(this.valueOf())});return me}if(me.Icon.length==6){var last=me.Icon[5];me.Icon.length=6;$(last.box).remove();return}var Icon=typeof icon=="string"?appIcon_t2(icon):icon;if(idx!=undefined){me.Icon.splice(idx,0,Icon);me.box.append(Icon.box,idx)}else{me.Icon.push(Icon);me.box.append(Icon.box)}}},removeIcon:function(icon){var idx=(Panel.getIdx(icon.box));me.Icon.splice(idx,1);$(icon.box).remove()},getIdx:function(ex,ey){var off=me.pbox.offset();switch(me.location){case"top":return ~~((ex-off.left)/142);case"left":case"right":return ~~((ey-off.top)/112)}},addStyle:function(){me.pbox.removeClass().addClass("dock_container dock_pos_"+me.location);switch(me.location){case"top":me.topPanel.box.css({"width":"100%","height":"73px"}).show();me.leftPanel.box.css({"width":"0","height":"0"}).hide();me.rightPanel.box.css({"width":"0%","height":"0"}).hide();Deskpanel.box.css({"left":0,"right":0});Deskpanel.desktopsContainer.css("top",73);break;case"left":me.leftPanel.box.css({"width":"73px","height":"100%"}).show();me.topPanel.box.css({"width":"0","height":"0"}).hide();me.rightPanel.box.css({"width":"0%","height":"0"}).hide();Deskpanel.box.css({"left":"73px","right":"0px"});
Deskpanel.desktopsContainer.css("left",73);break;case"right":me.rightPanel.box.css({"width":"73px","height":"100%"}).show();me.leftPanel.box.css({"width":"0","height":"0"}).hide();me.topPanel.box.css({"width":"0","height":"0"}).hide();Deskpanel.box.css({"left":0,"right":73});Deskpanel.desktopsContainer.css("top",0);break}},initDrag:function(){var desk=Deskpanel.desktopsContainer.find(".appListContainer");me.box.sortable({connectWith:desk,items:".appButton",opacity:"0.6",scroll:true,start:function(event,ui){},stop:function(event,ui){var item=ui.item;var p=item.parent();if(p.hasClass("appListContainer")){item.css("position","absolute")}Deskpanel.refreshIcon()}}).disableSelection()}}}();Navbar=function(me){return me={init:function(){me.bindEvent()},bindEvent:function(){$("div#taskBarRight_desktop a").click(function(){var page=$(this).attr("name");var _this=$(this);var index=parseInt(page.replace("desk_",""));me.bindSwitchDesktopAnimate(index,thisPage)})},bindSwitchDesktopAnimate:function(t,c){if(t==c){return}var left=0;var work=Deskpanel.desktopsContainer.find(".desktopContainer[index=0]");var internet=Deskpanel.desktopsContainer.find(".desktopContainer[index=1]");var enjoy=Deskpanel.desktopsContainer.find(".desktopContainer[index=2]");var game=Deskpanel.desktopsContainer.find(".desktopContainer[index=3]");if(t<c){left=screenWidth}else{left=-screenWidth}var cdesk=Deskpanel.desktopsContainer.find(".desktopContainer[index="+(thisPage-1)+"]");var idesk=Deskpanel.desktopsContainer.find(".desktopContainer[index="+(t-1)+"]");cdesk.removeClass("desktop_current");idesk.removeClass("desktop_current").addClass("desktop_current");cdesk.stop().animate({left:left},300,function(){});idesk.stop().animate({left:0},300,function(){});if(t==1){internet.css("left",screenWidth);enjoy.css("left",screenWidth);game.css("left",screenWidth)}else{if(t==2){work.css("left",-screenWidth);enjoy.css("left",screenWidth);game.css("left",screenWidth)}else{if(t==3){work.css("left",-screenWidth);internet.css("left",-screenWidth);game.css("left",screenWidth)}else{if(t==4){work.css("left",-screenWidth);internet.css("left",-screenWidth);enjoy.css("left",-screenWidth)}}}}Windows.showWindowDesk();thisPage=t},}}();ElsePanel=function(me){var mome='<div id="mome"><div class="infotitl">备忘录</div></div>';var inform='<div id="inform"><div class="infotitl">通知</div></div>';var _msgBox='<div id="msg"><div id="msg_close"><a href="#">关闭</a></div></div>';return ep={init:function(){ep.create();ep.bindEvent()},create:function(){Desktop.addPanel(mome);Desktop.addPanel(inform);Desktop.addPanel(_msgBox)},bindEvent:function(){$("#mome").draggable({containment:"#desktop",start:function(){var zindex=$("#inform").css("z-index");var z=parseInt(zindex)+1;$("#mome").css({"z-index":z})}});$("#inform").draggable({containment:"#desktop",start:function(){var zindex=$("#mome").css("z-index");var z=parseInt(zindex)+1;$("#inform").css({"z-index":z})}});$("#mome").click(function(){var zindex=$("#inform").css("z-index");var z=parseInt(zindex)+1;$("#mome").css({"z-index":z})});$("#inform").click(function(){var zindex=$("#mome").css("z-index");var z=parseInt(zindex)+1;$("#inform").css({"z-index":z})});$("#msg_close a").click(function(){$("#msg").slideUp()})}}}();dockEffectBox=function(me){var _tbox="<div id='docktop' class='dock_drap_effect dock_drap_effect_top ' style='display: none;' _olddisplay='block'></div>";var _lbox="<div id='dockleft' class='dock_drap_effect dock_drap_effect_left' style='display: none;'></div>";var _rbox="<div id='dockright' class='dock_drap_effect dock_drap_effect_right' style='display: none;'></div>";var _proxybox="<div class='dock_drap_proxy' style='display: none; left: -79px; top: -260px;'></div>";var _maskbox="<div id='dockmask' class='dock_drap_mask' style='display: none;'>"+"<div class='dock_drop_region_top' cmd='region'name='top'></div>"+"<div class='dock_drop_region_left' cmd='region' name='left'></div>"+"<div class='dock_drop_region_right' cmd='region' name='right'></div>"+"</div>";return me={init:function(){me.create()},create:function(){me.tbox=$(_tbox);me.lbox=$(_lbox);me.rbox=$(_rbox);me.proxybox=$(_proxybox);me.maskbox=$(_maskbox);me.addDesktop()},addDesktop:function(){Desktop.addPanel(me.tbox);Desktop.addPanel(me.lbox);Desktop.addPanel(me.rbox);Desktop.addPanel(me.proxybox);Desktop.addPanel(me.maskbox)},show:function(){me.tbox.show();me.lbox.show();me.rbox.show();me.maskbox.show()},hide:function(){me.tbox.hide();me.lbox.hide();me.rbox.hide();me.maskbox.hide()}}}();Filelist=function(){var _folder='<div id="folder" style=\'left:700px;\'><a href="#">'+'<div id="folder_content" class="taskContainerInner" >'+'<div id="min_icon_folder">'+'<img width="32" height="32" border="0" src="icon/folder_o.png" />'+"</div>"+'<div id="min_font_folder">折叠任务</div>'+"</div>"+"</a></div>";var _sonfolder='<div id="filelist" class="filelist"></div>';return file={init:function(){file.create();file.bindStyle();file.bindEvent()},create:function(){Desktop.addPanel(_folder);Desktop.addPanel(_sonfolder)
},bindEvent:function(){$("#folder a").powerFloat({width:190,eventType:"click",targetMode:null,target:$("#filelist"),showCall:function(){}})},bindStyle:function(){$("#folder").mouseenter(function(){$("#folder").css({"background-image":"url(image/taskBar/taskBarItem_hover.png)",})});$("#folder").mouseleave(function(){$("#folder").css({"background-image":"url(image/taskBar/taskBarItem.png)"})})}}}();BottomBar=function(me){var _box="<div id='bottomBar' class='bottomBar' style='z-index: 5031;'></div>";var _NextBox="<div id='taskNextBox' class='taskNextBox' _olddisplay='' style='display: none;'><a id='taskNext' class='taskNext' hidefocus='true' href='#'></a></div>";var _PreBox="<div id='taskPreBox' class='taskPreBox' _olddisplay='' style='display: none;'><a id='taskPre' class='taskPre' hidefocus='true' href='#'></a></div>";var _taskContainner="<div id='taskContainer' class='taskContainer' style=''></div>";var bottomBarBgTask="<div class='bottomBarBgTask'></div>";return me={init:function(){me.create();Desktop.addPanel(me.box);Desktop.addPanel(bottomBarBgTask)},create:function(){var box=me.box=$(_box);me.innerbox=$("<div id='taskContainerInner' class='taskContainerInner' style=''></div>");me.taskContainner=$(_taskContainner);me.taskContainner.append(me.innerbox);box.append(_NextBox);box.append(me.taskContainner);box.append(_PreBox)},addItem:function(item){me.innerbox.append(item);var len=me.innerbox.children().length;var id=item.attr("id");var w=screenWidth-935;me.taskContainner.width(w);me.innerbox.css({"margin-right":0,"width":(w)});me.setCurrent(id)},getItem:function(id){return me.innerbox.find("a[tid='"+id+"']")},getItemNum:function(){return me.innerbox.children().size()},setCurrent:function(id){me.addCurrent(id);me.removeItemSibling(id)},addCurrent:function(id){me.innerbox.find("#"+id).addClass("taskCurrent")},removeItemSibling:function(id){me.innerbox.find("#"+id).siblings().removeClass("taskCurrent")},getALLItemID:function(){var items=me.innerbox.children();var idArray=[];items.each(function(){var id=$(this).attr("id");id=id.substring(id.lastIndexOf("_")+1,id.length);idArray.push(id)});return idArray}}}();Task=$.Class({init:function(op){this.create(op);this.rightMenu()},create:function(op){var task=$("<div>",{"class":"taskGroup taskGroupAnaWidth",id:"taskGroup_"+op.id+"_"+op.id});var taskItemIcon=$("<div>",{"class":"taskItemIcon"});$("<img src='icon/"+op.icon+"'/><div class='taskItemIconState'></div>").appendTo(taskItemIcon);var taskItemTxt=$("<div>",{"class":"taskItemTxt",text:op.title});var taskItemBox=$("<div>",{"class":"taskItemBox"});var taskA=$("<a>",{"class":"taskItem fistTaskItem","href":"#",id:"taskItem_"+op.id,"title":op.title,"tid":op.id,"appid":op.id+"_"+op.id});taskA.append(taskItemIcon).append(taskItemTxt);taskItemBox.append(taskA);task.append(taskItemBox);this.box=task},rightMenu:function(){var taskmenu=[[{text:"显示桌面",img:"desktop.png",func:function(){Windows.showWindowDesk()}}],[{text:"关闭全部",img:"close_all.png",func:function(){Windows.closeAllWindow()}}],[{text:"关闭其他",img:"close_others.png",func:function(){var id=$(this).attr("id");wid=id.substring(id.lastIndexOf("_")+1,id.length);Windows.closeElseWindow(wid)}}],[{text:"关闭",img:"close.png",func:function(){var id=$(this).attr("id");wid=id.substring(id.lastIndexOf("_")+1,id.length);art.dialog.list[wid].close();$("#"+id).remove()}}]];this.box.smartMenu(taskmenu,{name:"taskmenu",offsetX:1,offsetY:-135})}});Windows=function(me){return me={showWindow:function(id){var array=art.dialog.list;var taskIds=BottomBar.getALLItemID();var taskLen=taskIds.length;var api=array[id];var wrap=api.DOM.wrap;var $wrap=$(wrap);if(taskLen>1){if($wrap.is(":hidden")){api.show()}else{if(!$wrap.hasClass("aui_state_focus")){api.focus()}else{api.hide()}}}else{if($wrap.is(":visible")){api.hide()}else{api.show()}}},showWindowDesk:function(){var list=art.dialog.list;for(var i in list){list[i].hide()}},hideWindow:function(id){art.dialog.list[id].hide()},closeMinTask:function(id){$("#taskGroup_"+id+"_"+id).remove()},closeAllWindow:function(){var list=art.dialog.list;for(var i in list){list[i].close()}},closeElseWindow:function(id){var list=art.dialog.list;for(var i in list){if(i!=id){list[i].close()}}},openSys:function(op){art.dialog({id:op.id,title:op.title,width:op.width,height:op.height,icon:op.icon,max:false,min:false,content:op.content})},bindStyle:function(){$(".sonfile").mouseenter(function(){$(this).css({"background-image":"url(images/bg_task_group_t_over.png)"})});$(".sonfile").mouseleave(function(){$(this).css({"background-image":"url(images/bg_task_group_t.png)"})})},bindEvent:function(id){$(".sonMenuList").bind("mouseenter",function(){$(this).css({"background-image":"url(images/appbutton_mouseover_bg3.png)"})});$(".sonMenuList").bind("mouseleave",function(){$(this).css({"background-image":"none"})});$(".sonMenuList").click(function(){var _this=$(this);var id=_this.attr("appid");var title=$.trim(_this.text());var url=_this.attr("url");var icon=_this.find("img").attr("src").split("/")[1];
var sonMenu="[]";var jsonSonMenu=eval("("+sonMenu+")");Windows.openApp(id,title,url,icon,jsonSonMenu,width,height)});$("#sonfile_a"+id).click(function(){var wrap=art.dialog.list[id].DOM.wrap;var $wrap=$(wrap);if($wrap.is(":hidden")){art.dialog.list[id].show();art.dialog.list[id].focus()}else{if(!$wrap.hasClass("aui_state_focus")){art.dialog.list[id].focus()}else{art.dialog.list[id].show()}}$("#floatBox_mode").hide()})},openApp:function(id,title,url,icon,jsonSonMenu,width,height){var taskInner=BottomBar.innerbox;var taskItem=BottomBar.getItem(id);if(taskItem.length==1){var wrap=art.dialog.list[id].DOM.wrap;var $wrap=$(wrap);if($wrap.is(":hidden")){art.dialog.list[id].show();art.dialog.list[id].focus()}else{if(!$wrap.hasClass("aui_state_focus")){art.dialog.list[id].focus()}else{art.dialog.list[id].show()}}return}else{var len=BottomBar.getItemNum();var taskLength=(len+1)*190+10;if(len>30&&len!=0){art.dialog({title:"系统提示",width:255,height:80,max:false,min:false,content:"任务过多，请关闭其他任务！",button:[{name:"手动关闭"},{name:"关闭所有",callback:function(){Windows.closeAllWindow()}}]});return false}var task=Task({"id":id,"title":title,"icon":icon});BottomBar.addItem(task.box);task.box.click(function(){me.showWindow(id);BottomBar.setCurrent(task.box.attr("id"))});var sonfile='<a id="sonfile_a'+id+'" href="#">'+'<div id="sonfile_'+id+'" class="sonfile">'+'<div class="min_icon_sonfolder">'+'<img width="32" height="32" border="0" src="icon/'+icon+'" />'+"</div>"+'<div class="min_font_sonfolder">'+title+"</div>"+"</div></a>";if(jsonSonMenu.length>0){var sonlist="";var properties="";for(var i=0;i<jsonSonMenu.length;i++){properties='appid="'+jsonSonMenu[i].appid+'" url="'+jsonSonMenu[i].url+'"';sonlist+='<div id="'+jsonSonMenu[i].appid+'" '+properties+' class="sonMenuList" align="center">'+'<a href="#"><div class="sonMenuListIocn">'+'<img width="64" height="64" src="icon/'+jsonSonMenu[i].icon+'" />'+"</div>"+'<div class="sonMenuListTitle">'+jsonSonMenu[i].name+"</div></a>"+"</div>"}var _box='<div id="sonMenu_box'+id+'" class="sonMenuListBox"><div class="sonMenu_line">'+'<span class="sonMenu_font">应用</span></div>'+sonlist+"</div>";art.dialog({"id":id,padding:15,title:title,width:width,height:height,max:true,min:true,content:_box,close:function(){me.closeMinTask(id);$("#sonfile_a"+id).remove();if($("#filelist a").size()==0){$("#folder").hide()}}})}else{art.dialog.open(url,{"id":id,title:title,width:width,height:height,icon:icon,close:function(){me.closeMinTask(id);$("#sonfile_a"+id).remove();if(($(window).width()-770)>=taskLength){$("#folder").hide()}if(BottomBar.getItemNum()<=2){$("#folder").hide()}}})}var ww=$(window).width()-970;if(ww<=taskLength){$("#filelist").append(sonfile)}me.bindStyle();me.bindEvent(id);if((ww+200)<=taskLength){$("#folder").show();count=BottomBar.getItemNum()}if(len>=3){$("#taskContainer").css({"width":420,});$("#taskContainerInner").css({"width":420,})}else{$("#taskContainer").css({"width":665,});$("#taskContainerInner").css({"width":665,})}}}}}();appIcon_amg=$.Class({create:function(t){this.box=$("<div type='"+t+"' class='appButton amg_folder_appbutton' ></div>")}});appIcon_t0=$.Class({create:function(t){this.box=$("<div type='"+t+"' class='appButton' ></div>");this.setRightMenu()},setRightMenu:function(){}});appIcon_t1=appIcon_t0.extend({init:function(fid){this.fid=fid;this.app=DATA.app[fid];this.tx=1;this.create(fid);this.bindEvent()},create:function(fid){this._super(1);this.box.attr({id:"icon_app_"+this.app.appid+"_"+this.app.asc,appid:this.app.appid,fileid:this.app.appid,title:this.app.name,url:this.app.url,sonMenu:this.app.sonMenu,uid:"app_"+this.app.appid,fid:fid});var appIcon=$("<div>",{id:"icon_app_"+this.app.appid+"_"+this.app.asc+"_icon_div","class":"appButton_appIcon"});appIcon.append($("<img>",{alt:this.app.name,src:"icon/"+this.app.icon,"class":"appButton_appIconImg",id:"icon_app_"+this.app.appid+"_"+this.app.asc+"_img",}));var nameDiv=$("<div class='appButton_appName'></div>");var name_table=$('<table height="20" cellpadding="0" cellspacing="0" border="0" align="center">'+'<tr><td class="appButton_appName_table_left">'+this.app.name+"</td>"+'<td class="appButton_appName_table_right" width="10"></td></tr></table>');nameDiv.append(name_table);var notify=$("<div>",{"class":"appButton_notify",id:"icon_app_"+this.app.appid+"_"+this.app.asc+"_notify"});$("<span class='appButton_notify_inner'></span>").appendTo(notify);var deleteDiv=$("<div>",{title:"卸载应用",id:"icon_app_"+this.app.appid+"_"+this.app.asc+"_delete","class":"appButton_delete"});this.box.append(appIcon).append(nameDiv).append(notify).append(deleteDiv)},bindEvent:function(){this.box.click(function(e){e.preventDefault();e.stopPropagation();var _this=$(this);var id=_this.attr("appid");var fid=_this.attr("fid");var _thisapp=DATA.app[fid];var title=$.trim(_this.text());var url=_this.attr("url");var icon=_this.find("img").attr("src").split("/")[1];var sonMenu=_this.attr("sonMenu");if(sonMenu==undefined){sonMenu="[]"}var jsonSonMenu=eval("("+sonMenu+")");
Windows.openApp(id,title,url,icon,jsonSonMenu,_thisapp.width,_thisapp.height)})}});appIcon_t2=appIcon_t0.extend({init:function(fid){this.fid=fid;this.sApp=DATA.sApp[fid];this.tx=2;this.create();this.bindEvent()},create:function(){this._super(2);this.box.attr({id:"icon_app_"+this.sApp.appid+"_"+this.sApp.asc,appid:this.sApp.appid,fileid:this.sApp.appid,title:this.sApp.name,url:this.sApp.url,sonMenu:this.sApp.sonMenu,uid:"app_"+this.sApp.appid});var appIcon=$("<div>",{id:"icon_app_"+this.sApp.appid+"_"+this.sApp.asc+"_icon_div","class":"appButton_appIcon"});appIcon.append($("<img>",{alt:this.sApp.name,src:"icon/min/"+this.sApp.icon,"class":"appButton_appIconImg",id:"icon_app_"+this.sApp.appid+"_"+this.sApp.asc+"_img",width:"35px",height:"35px"}));var nameDiv=$("<div class='appButton_appName'></div>");var name_inner=$("<div>",{"class":"appButton_appName_inner",id:"icon_app_"+this.sApp.appid+"_"+this.sApp.asc+"_name",text:this.sApp.name});var name_right=$("<div class='appButton_appName_inner_right'></div>");nameDiv.append(name_inner).append(name_right);var deleteDiv=$("<div",{title:"卸载应用",id:"icon_app_"+this.sApp.appid+"_"+this.sApp.asc+"_delete","class":"appButton_delete"});this.box.append(appIcon).append(nameDiv).append(deleteDiv)},bindEvent:function(){this.box.click(function(e){e.preventDefault();e.stopPropagation();var _this=$(this);var id=_this.attr("appid");var fid=_this.attr("fid");var _thisapp=DATA.app[fid];var title=$.trim(_this.text());var url=_this.attr("url");var icon=_this.find("img").attr("src").split("/")[1];var sonMenu=_this.attr("sonMenu");var jsonSonMenu=eval("("+sonMenu+")");Windows.openApp(id,title,url,icon,jsonSonMenu,_thisapp.width,_thisapp.height)})}});msgShow=function(){$("#msg").slideDown()};msgHide=function(){$("#msg").slideUp()};$(".desk_icon_container").each(function(){var desk4_button=$(this);desk4_button.click(function(e){})});var current_app_container="#desk4_container";showApp=function(divName){var nameDiv="#"+divName;$("#desk4_container").hide();$(nameDiv).show();current_app_container=nameDiv};deskBack=function(){if(current_app_container!="#desk4_container"){$(current_app_container).hide();$("#desk4_container").show()}};$("#desktopsContainer").hide();